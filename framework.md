# 框架选型调研

|          |                               robot+appium+adb                               |                            panda-libs                            |                            AutoStudio                            |                     pytest+uiautomator2+adb                      |
|:--------:|:----------------------------------------------------------------------------:|:----------------------------------------------------------------:|:----------------------------------------------------------------:|:----------------------------------------------------------------:|
|   环境依赖   |                            python+jdk+android sdk                            |                      python+jdk+android sdk                      |                                内置                                |                      python+jdk+android sdk                      |
|  需要掌握语法  |                               robot特殊语法+python                               |                              python                              |                              python                              |                              python                              |
| 基本框架完成状态 |                                      存在                                      |                                存在                                |                                存在                                |                                无                                 |
| 图形化使用界面  |                                     ride                                     |                         panda-web(浏览器展示)                         |                              cs架构自带                              |                                无                                 |
|  元素定位工具  |                               appium inspector                               |                             weditor                              |                               内置自带                               |                             weditor                              |
|  执行框架能力  |             robotframework，<br/>基础测试功能全具备，<br/>开源框架，<br/>有开源社区，              |                           自研，基础测试功能全具备                           |                           自研，基础测试功能全具备                           |           pytest,<br/>基础测试功能全具备，<br/>开源框架，有开源社区，插件最多，            |
|   执行方法   |                          ride界面执行<br/>命令行或pycharm执行                          |                panda-web 浏览器执行<br/>命令行或pycharm执行                 |                             CS架构工具执行                             |                          命令行或pycharm执行                           |
|  运行稳定性   |              本机需要一直开启cs架构的appium服务，可能会崩掉卡住，<br/>非google原生，运行速度慢              |              无需开启，应该会好点，uiautomator为google原生,运行速度快               |                    本机需一直开启cs架构的自研软件，可能会崩掉卡住，                     |              无需开启，应该会好点，uiautomator为google原生,运行速度快               |
|  关键字封装   |           基于robot语法编写，可复用，灵活性下降，<br/>不支持复杂语法，<br/>不利于提升测试人员代码编写能力            |  基于python语法编写,可复用，灵活性高，容易编写复杂功能，<br/>需要代码阅读能力，<br/>可提升测试人员代码能力   |  基于python语法编写,可复用，灵活性高，容易编写复杂功能，<br/>需要代码阅读能力，<br/>可提升测试人员代码能力   |  基于python语法编写,可复用，灵活性高，容易编写复杂功能，<br/>需要代码阅读能力，<br/>可提升测试人员代码能力   |
| 用例层展现形式  | 完美,基于robot语法可基本做到用例代码及测试步骤<br/>测试步骤:Launch Settings<br/>用例代码:Launch Settings | 纯python代码:<br/>测试步骤:Launch Settings<br/>用例代码:d.launch_settings() | 纯python代码:<br/>测试步骤:Launch Settings<br/>用例代码:d.launch_settings() | 纯python代码:<br/>测试步骤:Launch Settings<br/>用例代码:d.launch_settings() |
|  多机交互功能  |                                框架无，需重新考虑方案实现                                 |                               已实现                                |                               已实现                                |                          框架无，需重新考虑方案实现                           |

*          【方案一】（robot+appium+adb）:
                     优点: 1、已完成大量case编写，形成基于项目的公共keywords，继续使用，可以减少封装的时间成本（前提需要保证用例有效性）
                              2、robot语法在用例层面表现非常优秀，用例代码即测试步骤的表现方式很容易理解测试步骤（不需要注释）
                              3、开源框架优点，网上基本可以找到相关使用方法
                     缺点：1、底层执行服务使用appium，本地执行时需要同时长期挂载，容易出现软件崩溃导致用例执行断开
                              2、robot语法在关键字封装层灵活性不够，基本还是需要Python完成在进行对Python封装，因此需要掌握两套语法，
                              3、大量使用基于特定工具语法，不利于提升通用语言代码能力
*           【方案二】（panda-libs(自研)）:
                     优点: 1、本机无需开启其他软件服务，用例执行崩溃率降低
                              2、已完成基础平台化，实现许多定制功能，如远程执行，多机执行，交互，飞书通知，报告持久化等
                              3、有专门团队人员了解成套框架平台的原理，可以继续维护或新增功能。人员：罗宇琦，文强，张海波
                     缺点：1、自研框架通用缺点，只能使用本框架提供的api，对查找框架api能力要求较高，
                              3、目前无gm相关项目实现，需要重新编写相关关键字
*           【方案三】（AutoStudio(自研))）:
                     优点: 1、环境相关依赖全部内置，安装方便
                              2、元素定位工具体验感最好
                              3、把通用方法安置到最外层目录下，方便寻找通用api
                     缺点：1、需要一直开启c/s软件服务，软件性能差，运行慢，长期挂载可能会导致软件卡住而无法正常完成用例
                                2、存在一些已知bug但无团队继续维护
*           【方案四】（pytest+uiautomator2+adb）:
                     优点: 1、运行速率快，本机不开启软件服务，
                              2、开源框架优点，各种问题基本都能在网上找到解决办法i
                     缺点：1、还未开始，需要从0到1重新设计框架

# 框架选型成本

|           | AutoStudio | panda-libs | Robot Framework+Appium |                       差异主要原因                        |
|:---------:|:----------:|:----------:|:----------------------:|:---------------------------------------------------:|
| 学习成本（人/天） |     16     |     21     |           18           |            基于框架是否完成过相关车机项目，有项目的框架学习成本会降低            |
|   工具维护    |     无      |    140     |           无            | robot框架是基于当前项目完成的，其他扩展功能未实现<br/>AutoStudio/RF暂时无法维护 |
|   执行成本    |     3      |     1      |           2            |                   本地是否需要额外开启软件服务                    |

------


------
